<?php

/**
 * @file
 * The module file.
 */

use Drupal\Core\StringTranslation\TranslatableMarkup;

/**
 * Implements hook_theme_registry_alter().
 */
function thunder_tonic_theme_registry_alter(&$theme_registry) {
  $theme_registry['form_element']['path'] = drupal_get_path('module', 'thunder_tonic') . '/templates';
  $theme_registry['details']['path'] = drupal_get_path('module', 'thunder_tonic') . '/templates';
  $theme_registry['status_report_general_info']['path'] = drupal_get_path('module', 'thunder_tonic') . '/templates';
}

/**
 * Implements hook_preprocess_form_element().
 */
function thunder_tonic_preprocess_form_element(&$variables) {
  if (!empty($variables['description'])) {
    $variables['description_display'] = 'invisible';
  }
}

/**
 * Implements hook_preprocess_details().
 */
function thunder_tonic_preprocess_details(&$variables) {
  if (!empty($variables['description'])) {
    $variables['description_display'] = 'invisible';
  }
}

/**
 * Implements template_preprocess_status_report().
 */
function thunder_tonic_preprocess_status_report_general_info(&$variables) {
  if (!empty($thunder_version = \Drupal::service('extension.list.module')->get('thunder')->info['version'])) {
    $variables['thunder']['title'] = new TranslatableMarkup('Thunder Version');
    $variables['thunder']['value'] = $thunder_version;
    $variables['thunder']['icon_class'] = 'thunder';
  }
}
